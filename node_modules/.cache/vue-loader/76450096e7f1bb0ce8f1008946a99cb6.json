{"remainingRequest":"Z:\\progs\\examples\\TT\\testTask\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!Z:\\progs\\examples\\TT\\testTask\\src\\App.vue?vue&type=script&lang=js&","dependencies":[{"path":"Z:\\progs\\examples\\TT\\testTask\\src\\App.vue","mtime":1606682871959},{"path":"Z:\\progs\\examples\\TT\\testTask\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\progs\\examples\\TT\\testTask\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"Z:\\progs\\examples\\TT\\testTask\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"Z:\\progs\\examples\\TT\\testTask\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGxvYWRZbWFwIH0gZnJvbSAndnVlLXlhbmRleC1tYXBzJwppbXBvcnQgbWthZEFycmF5IGZyb20gJy4vc3RvcmUvbW9kdWxlcy9NS0FELmpzJwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdsb2Rhc2gnCmV4cG9ydCBkZWZhdWx0IHsKCiAgZGF0YTogKCkgPT4gKHsKICAgIGNvb3JkczogWwogICAgICA1NS43NiwKICAgICAgMzcuNjQKICAgIF0sCiAgICBwcm9wZXJ0aWVzOiB7CiAgICB9LAogICAgcG9seWdvbjogbWthZEFycmF5Lm1hcCgoaSkgPT4gaS5yZXZlcnNlKCkpLAogICAgeVNldHRpbmdzOiB7fQogIH0pLAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIG9uQ2xpY2sgKGUpIHsKICAgICAgdGhpcy5jb29yZHMgPSBlLmdldCgnY29vcmRzJykKICAgICAgdGhpcy5nZXRBZGRyZXNzKHRoaXMuY29vcmRzKQogICAgICBjb25zdCBjbG9zZXN0RGlzdGFuY2UgPSBhd2FpdCB0aGlzLmdldENsb3Nlc3REaXN0YW5jZSh0aGlzLmNvb3JkcykKICAgICAgdGhpcy5zZXRSb3V0ZShlLCBjbG9zZXN0RGlzdGFuY2UpCiAgICB9LAogICAgZ2V0QWRkcmVzcyAoY29vcmRzKSB7CiAgICAgIHRoaXMucHJvcGVydGllcy5pY29uQ2FwdGlvbiA9ICfQv9C+0LjRgdC6Li4uJwogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgICAgeW1hcHMuZ2VvY29kZShjb29yZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICB2YXIgZmlyc3RHZW9PYmplY3QgPSByZXMuZ2VvT2JqZWN0cy5nZXQoMCkKCiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gewogICAgICAgICAgLy8g0KTQvtGA0LzQuNGA0YPQtdC8INGB0YLRgNC+0LrRgyDRgSDQtNCw0L3QvdGL0LzQuCDQvtCxINC+0LHRitC10LrRgtC1LgogICAgICAgICAgaWNvbkNhcHRpb246IFsKICAgICAgICAgICAgLy8g0J3QsNC30LLQsNC90LjQtSDQvdCw0YHQtdC70LXQvdC90L7Qs9C+INC/0YPQvdC60YLQsCDQuNC70Lgg0LLRi9GI0LXRgdGC0L7Rj9GJ0LXQtSDQsNC00LzQuNC90LjRgdGC0YDQsNGC0LjQstC90L4t0YLQtdGA0YDQuNGC0L7RgNC40LDQu9GM0L3QvtC1INC+0LHRgNCw0LfQvtCy0LDQvdC40LUuCiAgICAgICAgICAgIGZpcnN0R2VvT2JqZWN0LmdldExvY2FsaXRpZXMoKS5sZW5ndGggPyBmaXJzdEdlb09iamVjdC5nZXRMb2NhbGl0aWVzKCkgOiBmaXJzdEdlb09iamVjdC5nZXRBZG1pbmlzdHJhdGl2ZUFyZWFzKCksCiAgICAgICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0L/Rg9GC0Ywg0LTQviDRgtC+0L/QvtC90LjQvNCwLCDQtdGB0LvQuCDQvNC10YLQvtC0INCy0LXRgNC90YPQuyBudWxsLCDQt9Cw0L/RgNCw0YjQuNCy0LDQtdC8INC90LDQuNC80LXQvdC+0LLQsNC90LjQtSDQt9C00LDQvdC40Y8uCiAgICAgICAgICAgIGZpcnN0R2VvT2JqZWN0LmdldFRob3JvdWdoZmFyZSgpIHx8IGZpcnN0R2VvT2JqZWN0LmdldFByZW1pc2UoKQogICAgICAgICAgXS5qb2luKCcsICcpLAogICAgICAgICAgLy8g0JIg0LrQsNGH0LXRgdGC0LLQtSDQutC+0L3RgtC10L3RgtCwINCx0LDQu9GD0L3QsCDQt9Cw0LTQsNC10Lwg0YHRgtGA0L7QutGDINGBINCw0LTRgNC10YHQvtC8INC+0LHRitC10LrRgtCwLgogICAgICAgICAgYmFsbG9vbkNvbnRlbnQ6IGZpcnN0R2VvT2JqZWN0LmdldEFkZHJlc3NMaW5lKCkKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAogICAgbWFwSW5pdCAobWFwKSB7CiAgICAgIHRoaXMubXNjTWFwID0gbWFwCiAgICB9LAogICAgZ2V0Q2xvc2VzdERpc3RhbmNlIChjdXJyZW50UG9pbnQpIHsKICAgICAgY29uc3Qgb2JqZWN0ID0gW10KICAgICAgdGhpcy5wb2x5Z29uLmZvckVhY2goKGNvb3JkcykgPT4gewogICAgICAgIGNvbnN0IHIgPSA2MzcxIC8vINCg0LDQtNC40YPRgSDQt9C10LzQu9C4CiAgICAgICAgY29uc3QgZExhdCA9IChjdXJyZW50UG9pbnRbMF0udG9GaXhlZCg2KSAtIGNvb3Jkc1swXSkgKiAoTWF0aC5QSSAvIDE4MCkKICAgICAgICBjb25zdCBkTG9uID0gKGN1cnJlbnRQb2ludFsxXS50b0ZpeGVkKDYpIC0gY29vcmRzWzFdKSAqIChNYXRoLlBJIC8gMTgwKQogICAgICAgIGNvbnN0IGEgPSBNYXRoLnNpbihkTGF0IC8gMikgKiBNYXRoLnNpbihkTGF0IC8gMikgKwogICAgICAgICAgICBNYXRoLmNvcyhjb29yZHNbMF0gKiAoTWF0aC5QSSAvIDE4MCkpICogTWF0aC5jb3MoY3VycmVudFBvaW50WzBdICogKE1hdGguUEkgLyAxODApKSAqCiAgICAgICAgICAgIE1hdGguc2luKGRMb24gLyAyKSAqIE1hdGguc2luKGRMb24gLyAyKQogICAgICAgIGNvbnN0IGMgPSAyICogTWF0aC5hdGFuMihNYXRoLnNxcnQoYSksIE1hdGguc3FydCgxIC0gYSkpCiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSByICogYwogICAgICAgIG9iamVjdC5wdXNoKHsgZGlzdGFuY2UsIGNvb3JkcyB9KQogICAgICB9KQogICAgICByZXR1cm4gb2JqZWN0CiAgICB9LAogICAgc2V0Um91dGUgKGUsIGNsb3Nlc3REaXN0YW5jZSkgewogICAgICBjb25zdCBzZWxlY3RQb2ludCA9IHNvcnRCeShjbG9zZXN0RGlzdGFuY2UsICdkaXN0YW5jZScpWzBdCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZgogICAgICB5bWFwcy5yb3V0ZShbZS5nZXQoJ2Nvb3JkcycpLCBzZWxlY3RQb2ludC5jb29yZHNdKS50aGVuKChyb3V0ZXIpID0+IHsKICAgICAgICBjb25zdCBkaXN0YW5jZSA9IHJvdXRlci5nZXRMZW5ndGgoKQogICAgICAgIGNvbnNvbGUubG9nKGRpc3RhbmNlKQogICAgICAgIGNvbnNvbGUubG9nKCdpbmZvJywgdGhpcy5yb3V0ZSkKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm1zY01hcCkKICAgICAgICBpZiAodGhpcy5yb3V0ZSkgdGhpcy5tc2NNYXAuZ2VvT2JqZWN0cy5yZW1vdmUodGhpcy5yb3V0ZSkKICAgICAgICB0aGlzLnJvdXRlID0gcm91dGVyLmdldFBhdGhzKCkKICAgICAgICB0aGlzLnJvdXRlLm9wdGlvbnMuc2V0KHsgc3Ryb2tlV2lkdGg6IDUsIHN0cm9rZUNvbG9yOiAnMjI3ZjA1Jywgb3BhY2l0eTogMC43IH0pCiAgICAgICAgdGhpcy5tc2NNYXAuZ2VvT2JqZWN0cy5hZGQodGhpcy5yb3V0ZSkKICAgICAgfSwgKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpCiAgICAgIH0pCiAgICB9CiAgfSwKICBtb3VudGVkOiB7CiAgICBhc3luYyBtb3VudGVkICgpIHsKICAgICAgYXdhaXQgbG9hZFltYXAoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template lang=\"pug\">\n  #app\n    yandex-map(:coords=\"coords\" :zoom=\"9\" @click=\"onClick\" @map-was-initialized=\"mapInit\")\n     ymap-marker(:coords=\"coords\" marker-id=\"123\"  :properties=\"properties\" )\n     ymap-marker(:marker-id=\"1\"\n          marker-type=\"polygon\"\n          :coords=\"[polygon,[]]\"\n          circle-radius=\"16000\"\n          :marker-fill=\"{color: '#1890ff', opacity: 0.9}\"\n          :marker-stroke=\"{color: '#1890ff', width: 1}\"\n          :balloon=\"{header: 'MSC', body: 'MSC', footer: 'MSC'}\")\n</template>\n\n<script>\nimport { loadYmap } from 'vue-yandex-maps'\nimport mkadArray from './store/modules/MKAD.js'\nimport { sortBy } from 'lodash'\nexport default {\n\n  data: () => ({\n    coords: [\n      55.76,\n      37.64\n    ],\n    properties: {\n    },\n    polygon: mkadArray.map((i) => i.reverse()),\n    ySettings: {}\n  }),\n  methods: {\n    async onClick (e) {\n      this.coords = e.get('coords')\n      this.getAddress(this.coords)\n      const closestDistance = await this.getClosestDistance(this.coords)\n      this.setRoute(e, closestDistance)\n    },\n    getAddress (coords) {\n      this.properties.iconCaption = 'поиск...'\n      // eslint-disable-next-line no-undef\n      ymaps.geocode(coords).then(res => {\n        var firstGeoObject = res.geoObjects.get(0)\n\n        this.properties = {\n          // Формируем строку с данными об объекте.\n          iconCaption: [\n            // Название населенного пункта или вышестоящее административно-территориальное образование.\n            firstGeoObject.getLocalities().length ? firstGeoObject.getLocalities() : firstGeoObject.getAdministrativeAreas(),\n            // Получаем путь до топонима, если метод вернул null, запрашиваем наименование здания.\n            firstGeoObject.getThoroughfare() || firstGeoObject.getPremise()\n          ].join(', '),\n          // В качестве контента балуна задаем строку с адресом объекта.\n          balloonContent: firstGeoObject.getAddressLine()\n        }\n      })\n    },\n    mapInit (map) {\n      this.mscMap = map\n    },\n    getClosestDistance (currentPoint) {\n      const object = []\n      this.polygon.forEach((coords) => {\n        const r = 6371 // Радиус земли\n        const dLat = (currentPoint[0].toFixed(6) - coords[0]) * (Math.PI / 180)\n        const dLon = (currentPoint[1].toFixed(6) - coords[1]) * (Math.PI / 180)\n        const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n            Math.cos(coords[0] * (Math.PI / 180)) * Math.cos(currentPoint[0] * (Math.PI / 180)) *\n            Math.sin(dLon / 2) * Math.sin(dLon / 2)\n        const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\n        const distance = r * c\n        object.push({ distance, coords })\n      })\n      return object\n    },\n    setRoute (e, closestDistance) {\n      const selectPoint = sortBy(closestDistance, 'distance')[0]\n      // eslint-disable-next-line no-undef\n      ymaps.route([e.get('coords'), selectPoint.coords]).then((router) => {\n        const distance = router.getLength()\n        console.log(distance)\n        console.log('info', this.route)\n        console.log(this.mscMap)\n        if (this.route) this.mscMap.geoObjects.remove(this.route)\n        this.route = router.getPaths()\n        this.route.options.set({ strokeWidth: 5, strokeColor: '227f05', opacity: 0.7 })\n        this.mscMap.geoObjects.add(this.route)\n      }, (error) => {\n        console.log(error)\n      })\n    }\n  },\n  mounted: {\n    async mounted () {\n      await loadYmap()\n    }\n  }\n}\n</script>\n\n<style>\n* {\n  margin: 0;\n  padding: 0;\n}\n#app {\n  display: grid;\n  grid-template-rows: 1fr;\n  min-height: 100vh;\n}\n</style>\n"]}]}